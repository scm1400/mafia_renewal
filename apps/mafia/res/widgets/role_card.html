<!DOCTYPE html>
<html style="overflow: hidden">

<head>
    <script>
        /* create style sheet */
        const newFontStylePath = document.URL.includes('https://zep.us') ? "https://cdn-static.zep.us/static/zep-script/css/typography.css" : "https://cdn-static-stage.zep.us/static/zep-script/css/typography.css";

        document.head.appendChild(Object.assign(document.createElement("link"), {
            rel: "stylesheet",
            type: "text/css",
            href: newFontStylePath
        }));
    </script>
    <style type="text/css">
        :root {
            --sat: env(safe-area-inset-top);
            --sar: env(safe-area-inset-right);
            --sab: env(safe-area-inset-bottom);
            --sal: env(safe-area-inset-left);
        }

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            user-select: none !important;
            font-family: 'Pretendard JP', 'Pretendard', sans-serif, Arial;
            color: #27262E;
        }

        html {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            width: 300px;
            max-width: 100%;
            align-items: center;
            height: max-content;
        }

        .role-card {
            width: 100%;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .role-header {
            width: 100%;
            text-align: center;
            margin-bottom: 15px;
        }

        .role-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .role-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 10px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }

        .role-description {
            text-align: center;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            color: #555;
        }

        .role-ability {
            width: 100%;
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
        }

        .ability-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .ability-description {
            font-size: 14px;
            color: #555;
        }

        /* ì—­í• ë³„ ìƒ‰ìƒ */
        .mafia {
            background-color: #ffebee;
        }

        .mafia .role-title, .mafia .ability-title {
            color: #d32f2f;
        }

        .mafia .role-icon {
            background-color: #d32f2f;
            color: white;
        }

        .police {
            background-color: #e3f2fd;
        }

        .police .role-title, .police .ability-title {
            color: #1976d2;
        }

        .police .role-icon {
            background-color: #1976d2;
            color: white;
        }

        .doctor {
            background-color: #e8f5e9;
        }

        .doctor .role-title, .doctor .ability-title {
            color: #388e3c;
        }

        .doctor .role-icon {
            background-color: #388e3c;
            color: white;
        }

        .citizen {
            background-color: #fffde7;
        }

        .citizen .role-title, .citizen .ability-title {
            color: #fbc02d;
        }

        .citizen .role-icon {
            background-color: #fbc02d;
            color: white;
        }
        
        /* ì¶”ê°€ ì—­í•  ìŠ¤íƒ€ì¼ */
        .spy {
            background-color: #f3e5f5;
        }

        .spy .role-title, .spy .ability-title {
            color: #9c27b0;
        }

        .spy .role-icon {
            background-color: #9c27b0;
            color: white;
        }
        
        .medium {
            background-color: #e0f7fa;
        }

        .medium .role-title, .medium .ability-title {
            color: #00acc1;
        }

        .medium .role-icon {
            background-color: #00acc1;
            color: white;
        }
        
        .soldier {
            background-color: #e8eaf6;
        }

        .soldier .role-title, .soldier .ability-title {
            color: #3f51b5;
        }

        .soldier .role-icon {
            background-color: #3f51b5;
            color: white;
        }
        
        .politician {
            background-color: #efebe9;
        }

        .politician .role-title, .politician .ability-title {
            color: #795548;
        }

        .politician .role-icon {
            background-color: #795548;
            color: white;
        }
        
        .lover {
            background-color: #fce4ec;
        }

        .lover .role-title, .lover .ability-title {
            color: #e91e63;
        }

        .lover .role-icon {
            background-color: #e91e63;
            color: white;
        }
        
        .journalist {
            background-color: #fff3e0;
        }

        .journalist .role-title, .journalist .ability-title {
            color: #ff9800;
        }

        .journalist .role-icon {
            background-color: #ff9800;
            color: white;
        }
        
        .werewolf {
            background-color: #fafafa;
        }

        .werewolf .role-title, .werewolf .ability-title {
            color: #616161;
        }

        .werewolf .role-icon {
            background-color: #616161;
            color: white;
        }
        
        .gangster {
            background-color: #eceff1;
        }

        .gangster .role-title, .gangster .ability-title {
            color: #607d8b;
        }

        .gangster .role-icon {
            background-color: #607d8b;
            color: white;
        }
        
        .detective {
            background-color: #f1f8e9;
        }

        .detective .role-title, .detective .ability-title {
            color: #689f38;
        }

        .detective .role-icon {
            background-color: #689f38;
            color: white;
        }
        
        .gravedigger {
            background-color: #e0f2f1;
        }

        .gravedigger .role-title, .gravedigger .ability-title {
            color: #00897b;
        }

        .gravedigger .role-icon {
            background-color: #00897b;
            color: white;
        }
        
        .terrorist {
            background-color: #f9fbe7;
        }

        .terrorist .role-title, .terrorist .ability-title {
            color: #827717;
        }

        .terrorist .role-icon {
            background-color: #827717;
            color: white;
        }
        
        .madam {
            background-color: #fff1f1;
        }

        .madam .role-title, .madam .ability-title {
            color: #d81b60;
        }

        .madam .role-icon {
            background-color: #d81b60;
            color: white;
        }

        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #555;
        }
    </style>
</head>

<body>
    <div class="role-card">
        <div class="close-button" onclick="closeWidget()">Ã—</div>
        <div class="role-header">
            <div class="role-title" id="role-title">ì—­í•  ì´ë¦„</div>
        </div>
        <div class="role-icon" id="role-icon">ğŸ­</div>
        <div class="role-description" id="role-description">
            ì—­í• ì— ëŒ€í•œ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
        </div>
        <div class="role-ability">
            <div class="ability-title" id="ability-title">ëŠ¥ë ¥</div>
            <div class="ability-description" id="ability-description">
                ì—­í• ì˜ ëŠ¥ë ¥ì— ëŒ€í•œ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
        </div>
    </div>

    <script>
        let roleData = {
            "mafia": {
                title: "ë§ˆí”¼ì•„",
                icon: "ğŸ”ª",
                description: "ë°¤ì— ì‹œë¯¼ì„ ì£½ì´ëŠ” ì—­í• ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë§ˆí”¼ì•„ì™€ í˜‘ë ¥í•˜ì—¬ ì‹œë¯¼ë“¤ì„ ëª¨ë‘ ì œê±°í•˜ì„¸ìš”.",
                abilityTitle: "ì•”ì‚´",
                abilityDescription: "ë°¤ë§ˆë‹¤ í•œ ëª…ì˜ ì‹œë¯¼ì„ ì„ íƒí•˜ì—¬ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            },
            "police": {
                title: "ê²½ì°°",
                icon: "ğŸ”",
                description: "ë°¤ì— í•œ ëª…ì˜ ì •ì²´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì—­í• ì…ë‹ˆë‹¤. ë§ˆí”¼ì•„ë¥¼ ì°¾ì•„ ì‹œë¯¼ë“¤ì„ ë³´í˜¸í•˜ì„¸ìš”.",
                abilityTitle: "ì¡°ì‚¬",
                abilityDescription: "ë°¤ë§ˆë‹¤ í•œ ëª…ì„ ì„ íƒí•˜ì—¬ ë§ˆí”¼ì•„ì¸ì§€ ì•„ë‹Œì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            },
            "doctor": {
                title: "ì˜ì‚¬",
                icon: "ğŸ’‰",
                description: "ë°¤ì— í•œ ëª…ì„ ë³´í˜¸í•  ìˆ˜ ìˆëŠ” ì—­í• ì…ë‹ˆë‹¤. ë§ˆí”¼ì•„ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ì‹œë¯¼ì„ êµ¬í•˜ì„¸ìš”.",
                abilityTitle: "ì¹˜ë£Œ",
                abilityDescription: "ë°¤ë§ˆë‹¤ í•œ ëª…ì„ ì„ íƒí•˜ì—¬ ë§ˆí”¼ì•„ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
            },
            "citizen": {
                title: "ì‹œë¯¼",
                icon: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",
                description: "íŠ¹ë³„í•œ ëŠ¥ë ¥ì€ ì—†ì§€ë§Œ, íˆ¬í‘œë¥¼ í†µí•´ ë§ˆí”¼ì•„ë¥¼ ì°¾ì•„ë‚´ëŠ” ì—­í• ì…ë‹ˆë‹¤.",
                abilityTitle: "íˆ¬í‘œ",
                abilityDescription: "ë‚® ì‹œê°„ì— ì˜ì‹¬ë˜ëŠ” ì‚¬ëŒì—ê²Œ íˆ¬í‘œí•˜ì—¬ ë§ˆí”¼ì•„ë¥¼ ì°¾ì•„ë‚´ì„¸ìš”."
            },
            "spy": {
                title: "ìŠ¤íŒŒì´",
                icon: "ğŸ•µï¸",
                description: "ë§ˆí”¼ì•„ íŒ€ì˜ ì •ë³´ì›ì…ë‹ˆë‹¤.",
                abilityTitle: "ì ‘ì„ ",
                abilityDescription: "ì ‘ì„  ì „ ë°¤ë§ˆë‹¤ í”Œë ˆì´ì–´ í•œ ëª…ì„ ê³¨ë¼, ë§ˆí”¼ì•„ì¸ì§€ í™•ì¸ í•  ìˆ˜ ìˆë‹¤."
            },
            "medium": {
                title: "ì˜ë§¤",
                icon: "ğŸ‘»",
                description: "ì£½ì€ í”Œë ˆì´ì–´ë“¤ì˜ ëŒ€í™”ë¥¼ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                abilityTitle: "ì˜ë§¤ìˆ ",
                abilityDescription: "ì£½ì€ ìë“¤ì˜ ëŒ€í™”ë¥¼ ë“¤ì„ ìˆ˜ ìˆë‹¤."
            },
            "soldier": {
                title: "êµ°ì¸",
                icon: "ğŸª–",
                description: "ë§ˆí”¼ì•„ì˜ ê³µê²©ì„ í•œ ë²ˆ ë°©ì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                abilityTitle: "ë°©íƒ„",
                abilityDescription: "ë§ˆí”¼ì•„ì˜ ê³µê²©ì„ í•œ ì°¨ë¡€ ë²„í…¨ë‚¼ ìˆ˜ ìˆë‹¤."
            },
            "politician": {
                title: "ì •ì¹˜ì¸",
                icon: "ğŸ—£ï¸",
                description: "íˆ¬í‘œë¡œ ì²˜í˜•ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                abilityTitle: "ì²˜ì„¸",
                abilityDescription: "í”Œë ˆì´ì–´ ê°„ íˆ¬í‘œë¥¼ í†µí•´ ì²˜í˜•ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤."
            },
            "lover": {
                title: "ì—°ì¸",
                icon: "â¤ï¸",
                description: "ë°¤ì— ë‹¤ë¥¸ ì—°ì¸ê³¼ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                abilityTitle: "ì—°ì• ",
                abilityDescription: "ë°¤ë§Œ ë˜ë©´ ë‘˜ë§Œì˜ ëŒ€í™”ê°€ ê°€ëŠ¥í•˜ë‹¤."
            },
            "journalist": {
                title: "ê¸°ì",
                icon: "ğŸ“°",
                description: "í”Œë ˆì´ì–´ì˜ ì§ì—…ì„ ì¡°ì‚¬í•˜ì—¬ ê³µê°œí•©ë‹ˆë‹¤.",
                abilityTitle: "íŠ¹ì¢…",
                abilityDescription: "ë°¤ì— í•œ ëª…ì˜ í”Œë ˆì´ì–´ì˜ ì§ì—…ì„ ì¡°ì‚¬í•˜ì—¬ ë‹¤ìŒ ë‚  ì•„ì¹¨ ëª¨ë“  í”Œë ˆì´ì–´ì—ê²Œ í•´ë‹¹ ì‚¬ì‹¤ì„ ì•Œë¦°ë‹¤."
            },
            "werewolf": {
                title: "ì§ìŠ¹ì¸ê°„",
                icon: "ğŸº",
                description: "ë§ˆí”¼ì•„ê°€ ëª¨ë‘ ì‚¬ë§í•˜ë©´ ëŠ¥ë ¥ì´ í™œì„±í™”ë©ë‹ˆë‹¤.",
                abilityTitle: "ê°ˆë§",
                abilityDescription: "ë°¤ì— ì„ íƒí•œ í”Œë ˆì´ì–´ê°€ ë§ˆí”¼ì•„ì—ê²Œ ì‚´í•´ë‹¹í•  ê²½ìš° ë§ˆí”¼ì•„ì—ê²Œ ê¸¸ë“¤ì—¬ì§€ë©°, ì´í›„ ë§ˆí”¼ì•„ê°€ ëª¨ë‘ ì‚¬ë§í•˜ë©´ ë°¤ë§ˆë‹¤ í”Œë ˆì´ì–´ë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤."
            },
            "gangster": {
                title: "ê±´ë‹¬",
                icon: "ğŸ‘Š",
                description: "í”Œë ˆì´ì–´ì˜ íˆ¬í‘œë¥¼ ë°©í•´í•©ë‹ˆë‹¤.",
                abilityTitle: "ê³µê°ˆ",
                abilityDescription: "ë°¤ë§ˆë‹¤ í•œ ëª…ì„ ì„ íƒí•˜ì—¬, ë‹¤ìŒë‚  íˆ¬í‘œì‹œ í•´ë‹¹ í”Œë ˆì´ì–´ê°€ íˆ¬í‘œë¥¼ í•˜ì§€ ëª»í•˜ë„ë¡ ë§Œë“ ë‹¤."
            },
            "detective": {
                title: "ì‚¬ë¦½íƒì •",
                icon: "ğŸ•µï¸â€â™‚ï¸",
                description: "í”Œë ˆì´ì–´ì˜ ëŠ¥ë ¥ ì‚¬ìš©ì„ ì¶”ì í•©ë‹ˆë‹¤.",
                abilityTitle: "ì¶”ë¦¬",
                abilityDescription: "ë°¤ë§ˆë‹¤ í”Œë ˆì´ì–´ í•œ ëª…ì„ ì¡°ì‚¬í•˜ì—¬ í•´ë‹¹ í”Œë ˆì´ì–´ê°€ ëˆ„êµ¬ì—ê²Œ ëŠ¥ë ¥ì„ ì‚¬ìš©í•˜ì˜€ëŠ”ì§€ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤."
            },
            "gravedigger": {
                title: "ë„êµ´ê¾¼",
                icon: "âš°ï¸",
                description: "ì²«ë‚  ë§ˆí”¼ì•„ì—ê²Œ ì‚´í•´ë‹¹í•œ í”Œë ˆì´ì–´ì˜ ì§ì—…ì„ ì–»ìŠµë‹ˆë‹¤.",
                abilityTitle: "ë„êµ´",
                abilityDescription: "ì²«ë‚  ë§ˆí”¼ì•„ì—ê²Œ ì‚´í•´ë‹¹í•œ í”Œë ˆì´ì–´ì˜ ì§ì—…ì„ ì–»ëŠ”ë‹¤."
            },
            "terrorist": {
                title: "í…ŒëŸ¬ë¦¬ìŠ¤íŠ¸",
                icon: "ğŸ’£",
                description: "ì²˜í˜•ë  ë•Œ ë‹¤ë¥¸ í”Œë ˆì´ì–´ë¥¼ í•¨ê»˜ ì²˜í˜•í•©ë‹ˆë‹¤.",
                abilityTitle: "ìí­",
                abilityDescription: "íˆ¬í‘œë¡œ ì¸í•´ ì²˜í˜•ë  ë•Œ, í”Œë ˆì´ì–´ í•œ ëª…ì„ ì„ íƒí•˜ì—¬ ê°™ì´ ì²˜í˜•ë  ìˆ˜ ìˆë‹¤."
            },
            "madam": {
                title: "ë§ˆë‹´",
                icon: "ğŸ’‹",
                description: "ë§ˆí”¼ì•„ì™€ ì ‘ì´‰í•˜ì—¬ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                abilityTitle: "ì ‘ì„ ",
                abilityDescription: "ë§ˆí”¼ì•„ë¥¼ ìœ í˜¹í•  ê²½ìš°, ì„œë¡œì˜ ì¡´ì¬ë¥¼ ì•Œì•„ì°¨ë¦¬ê³  ë°¤ì— ëŒ€í™”í•  ìˆ˜ ìˆê²Œ ëœë‹¤."
            }
        };

        let _isMobile = false;
        let _isTablet = false;
        let $contentWrapper;

        function closeWidget() {
            hideWidget();
        }

        function hideWidget() {
            window.parent.postMessage({
                type: "WidgetRearrange",
                width: "0px",
                height: "0px",
            }, "*")
            window.parent.focus();
        }

        function revealWidget(moveScrollToBottom = false) {
            if (moveScrollToBottom && $contentWrapper) {
                $contentWrapper.scrollTop = $contentWrapper.scrollHeight;
            }
            if (_isMobile) {
                const rtcAndNotchHeight = 160 + parseInt(getComputedStyle(document.documentElement,).getPropertyValue("--sat"));
                window.parent.postMessage({
                    type: 'WidgetRearrange',
                    anchor: 'middle',
                    height: '100%',
                    width: '100%',
                    top: `-${parseInt(0)}px`
                }, '*')
            } else {
                window.parent.postMessage({
                    type: "WidgetRearrange",
                    anchor: "middle",
                    width: `300px`,
                    height: `400px`,
                }, "*")
            }
        }

        function fitTheSize() {
            window.parent.postMessage({
                type: "WidgetRearrange",
                width: document.body.offsetWidth + 10,
                height: document.body.offsetHeight + 10,
            }, "*")
        }
        
        // ì£¼ì–´ì§„ ì—­í•  IDì— ë§ëŠ” ì—­í•  ì •ë³´ ì„¤ì •
        function updateRoleUI(roleId) {
            // ì—­í•  IDê°€ ëŒ€ë¬¸ìë¼ë©´ ì†Œë¬¸ìë¡œ ë³€í™˜
            const role = roleId ? roleId.toLowerCase() : '';
            const roleInfo = roleData[role];
            
            console.log(`ì—­í•  ID: ${roleId}, ë³€í™˜ëœ ID: ${role}, ì •ë³´ ì°¾ìŒ: ${roleInfo ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}`);
            
            if (roleInfo) {
                document.getElementById('role-title').textContent = roleInfo.title;
                document.getElementById('role-icon').textContent = roleInfo.icon;
                document.getElementById('role-description').textContent = roleInfo.description;
                document.getElementById('ability-title').textContent = roleInfo.abilityTitle;
                document.getElementById('ability-description').textContent = roleInfo.abilityDescription;
                
                // ì—­í• ì— ë”°ë¥¸ í´ë˜ìŠ¤ ì¶”ê°€
                const roleCard = document.querySelector('.role-card');
                roleCard.classList.remove('mafia', 'police', 'doctor', 'citizen', 'spy', 'medium',
                                        'soldier', 'politician', 'lover', 'journalist', 'werewolf',
                                        'gangster', 'detective', 'gravedigger', 'terrorist', 'madam');
                roleCard.classList.add(role);
            } else {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ì—­í• : ${roleId}`);
                document.getElementById('role-title').textContent = `ì•Œ ìˆ˜ ì—†ëŠ” ì—­í•  (${roleId})`;
                document.getElementById('role-icon').textContent = "â“";
                document.getElementById('role-description').textContent = "ì§ì—… ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
                document.getElementById('ability-title').textContent = "ì•Œ ìˆ˜ ì—†ëŠ” ëŠ¥ë ¥";
                document.getElementById('ability-description').textContent = "ëŠ¥ë ¥ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
            }
            
            // ìœ„ì ¯ì„ í‘œì‹œ
            revealWidget();
        }

        window.addEventListener('message', function(e) {
            const data = e.data;
            
            if(data.type === "setWidget"){
                _isMobile = data.isMobile;
                _isTablet = data.isTablet;
                hideWidget();
            } else if (data.type === 'init') {
                try {
                    document.body.classList.remove("hidden");
                    revealWidget();
                } catch (error) {
                    alert("An error occurred:", error);
                }
            } else if (data.type === 'setRole') {
                // ê¸°ì¡´ setRole íƒ€ì… ì²˜ë¦¬ (legacy)
                updateRoleUI(data.role);
            } else if (data.type === 'role_info') {
                // GameFlowManagerì—ì„œ ì‚¬ìš©í•˜ëŠ” role_info íƒ€ì… ì²˜ë¦¬
                console.log("ì—­í•  ì •ë³´ ìˆ˜ì‹ :", data);
                
                // ì„œë²„ì—ì„œ ì „ë‹¬í•œ ì—­í•  ì •ë³´ ì‚¬ìš©
                const role = data.role.toLowerCase();
                
                // roleDataì— ì—†ëŠ” ì§ì—…ì´ë¼ë©´ ë™ì ìœ¼ë¡œ ì¶”ê°€
                if (!roleData[role]) {
                    roleData[role] = {
                        title: data.role,
                        icon: data.icon || "â“",
                        description: data.description || "ì„¤ëª… ì—†ìŒ",
                        abilityTitle: "ëŠ¥ë ¥",
                        abilityDescription: data.ability || "ëŠ¥ë ¥ ì„¤ëª… ì—†ìŒ"
                    };
                }
                
                // UI ì—…ë°ì´íŠ¸
                document.getElementById('role-title').textContent = data.role;
                document.getElementById('role-icon').textContent = data.icon || "â“";
                document.getElementById('role-description').textContent = data.description || "ì„¤ëª… ì—†ìŒ";
                document.getElementById('ability-title').textContent = "ëŠ¥ë ¥";
                document.getElementById('ability-description').textContent = data.ability || "ëŠ¥ë ¥ ì„¤ëª… ì—†ìŒ";
                
                // íŒ€ì— ë”°ë¼ ìŠ¤íƒ€ì¼ ì¡°ì •
                const roleCard = document.querySelector('.role-card');
                roleCard.classList.remove('mafia', 'police', 'doctor', 'citizen', 'spy', 'medium',
                                        'soldier', 'politician', 'lover', 'journalist', 'werewolf',
                                        'gangster', 'detective', 'gravedigger', 'terrorist', 'madam');
                
                if (data.team === "ë§ˆí”¼ì•„íŒ€") {
                    roleCard.classList.add('mafia');
                } else if (data.team === "ì‹œë¯¼íŒ€") {
                    roleCard.classList.add('citizen');
                } else {
                    // í•´ë‹¹ ì—­í•  IDë¡œ í´ë˜ìŠ¤ ì¶”ê°€
                    roleCard.classList.add(role);
                }
                
                // ìœ„ì ¯ í‘œì‹œ
                revealWidget();
            } else if (data.type === "hide") {
                hideWidget();
            } else if (data.type === "reveal") {
                revealWidget(true);
            } else if (data.type === "hideWidget") {
                // WidgetManagerì—ì„œ ë³´ë‚´ëŠ” ìˆ¨ê¹€ ë©”ì‹œì§€ ì²˜ë¦¬
                hideWidget();
            } else if (data.type === "showWidget") {
                // WidgetManagerì—ì„œ ë³´ë‚´ëŠ” í‘œì‹œ ë©”ì‹œì§€ ì²˜ë¦¬
                revealWidget();
            }
        });

        window.addEventListener('unload', function () {
            window.parent.focus();
        });

        // ëª¨ë°”ì¼ í™˜ê²½ ê°ì§€
        function checkMobile() {
            if (window.innerWidth <= 768) {
                document.body.classList.add('mobile');
            } else {
                document.body.classList.remove('mobile');
            }
        }

        window.addEventListener('resize', checkMobile);
        checkMobile();
    </script>
</body>

</html> 